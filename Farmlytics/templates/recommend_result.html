{% extends "index.html" %}
{% block content %}

<!-- Result Section -->
<section class="result-section">
  <div class="container">
    <div class="result-container">
      <!-- Success Animation -->
      <div class="result-icon success">
        <div class="icon-circle">
          <i class="fas fa-check"></i>
        </div>
        <div class="icon-rings">
          <div class="ring ring-1"></div>
          <div class="ring ring-2"></div>
        </div>
      </div>

      <!-- Result Header -->
      <div class="result-header">
        <span class="result-badge">
          <i class="fas fa-seedling me-2"></i>Analysis Complete
        </span>
        <h1 class="result-title">Your Recommendation</h1>
        <p class="result-subtitle">Based on your soil composition and environmental data</p>
      </div>

      <!-- Main Result Card -->
      <div class="result-card">
        <div class="result-card-header">
          <i class="fas fa-award"></i>
          <span>Recommended Crop</span>
        </div>
        <div class="result-value">
          <h2>{{ result }}</h2>
        </div>
        <div class="result-card-footer">
          <div class="confidence-bar">
            <span class="confidence-label">Confidence Level</span>
            <div class="confidence-track">
              <div class="confidence-fill" style="width: 95%;"></div>
            </div>
            <span class="confidence-value">95%</span>
          </div>
        </div>
      </div>

      <!-- Recommendations -->
      <div class="recommendations-grid">
        <div class="recommendation-card">
          <div class="recommendation-icon">
            <i class="fas fa-calendar-alt"></i>
          </div>
          <h4>Best Planting Time</h4>
          <p>Check local agricultural calendar for optimal sowing dates</p>
        </div>
        <div class="recommendation-card">
          <div class="recommendation-icon">
            <i class="fas fa-tint"></i>
          </div>
          <h4>Irrigation Needs</h4>
          <p>Plan irrigation schedule based on crop water requirements</p>
        </div>
        <div class="recommendation-card">
          <div class="recommendation-icon">
            <i class="fas fa-chart-line"></i>
          </div>
          <h4>Market Analysis</h4>
          <p>Consider local market demand and pricing trends</p>
        </div>
        <div class="recommendation-card">
          <div class="recommendation-icon">
            <i class="fas fa-users"></i>
          </div>
          <h4>Expert Consultation</h4>
          <p>Consult local agricultural officers for region-specific advice</p>
        </div>
      </div>

      <!-- Action Buttons -->
      <div class="result-actions">
        <a href="/crop-recommendation" class="btn-action primary">
          <i class="fas fa-redo me-2"></i>
          <span>New Analysis</span>
        </a>
        <a href="/fertilizer-recommendation" class="btn-action secondary">
          <i class="fas fa-flask me-2"></i>
          <span>Get Fertilizer Suggestion</span>
        </a>
        <a href="/" class="btn-action outline">
          <i class="fas fa-home me-2"></i>
          <span>Back to Home</span>
        </a>
      </div>
    </div>
  </div>
</section>

<script>
  window.addEventListener('load', async () => {
    if (window.FarmlyticsDB) {
      const result = "{{ result }}";
      const type = window.location.pathname.includes('fertilizer') ? 'fertilizer' : 'crop';
      // We can add more details if available, but for now result is the main thing
      await window.FarmlyticsDB.savePrediction(type, result, {
        timestamp: new Date().toISOString()
      });
      console.log('Prediction saved to history');
    }
  });
</script>

<style>
@keyframes scaleIn {
  from { transform: scale(0); opacity: 0; }
  to { transform: scale(1); opacity: 1; }
}

@keyframes ringPulse {
  0% { transform: scale(1); opacity: 0.5; }
  100% { transform: scale(1.5); opacity: 0; }
}

.result-icon .icon-circle {
  animation: scaleIn 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275) forwards;
}

.result-icon .ring {
  animation: ringPulse 2s ease-out infinite;
}

.result-icon .ring-2 {
  animation-delay: 0.5s;
}

.result-card {
  animation: fadeInUp 0.6s ease-out 0.3s both;
}

.recommendations-grid {
  animation: fadeInUp 0.6s ease-out 0.5s both;
}

.result-actions {
  animation: fadeInUp 0.6s ease-out 0.7s both;
}

@keyframes fadeInUp {
  from { transform: translateY(30px); opacity: 0; }
  to { transform: translateY(0); opacity: 1; }
}
</style>

{% endblock %}
